# self-web-safiri 技术方案文档

## 文档基础信息

| 项目 | 内容 |
|------|------|
| 文档版本 | V1.0 |
| 编写日期 | 2025-12-26 |
| 文档类型 | 技术方案设计 |
| 适用版本 | V1.0 MVP |

---

## 文档导航

本技术方案文档已拆分为多个独立模块，便于查阅和维护：

| 文档 | 说明 | 链接 |
|------|------|------|
| 系统架构设计 | 整体架构、技术栈、目录结构 | [查看](file:///f:/Development/Projects/self-web-safiri/docs/architecture.md) |
| 模块设计文档 | 各功能模块详细设计 | [查看](file:///f:/Development/Projects/self-web-safiri/docs/modules.md) |
| 数据库设计文档 | 数据库表结构、初始化脚本 | [查看](file:///f:/Development/Projects/self-web-safiri/docs/database.md) |
| IPC接口规范 | 进程间通信接口定义 | [查看](file:///f:/Development/Projects/self-web-safiri/docs/ipc-api.md) |
| 开发规划文档 | 开发阶段规划、里程碑、资源需求 | [查看](file:///f:/Development/Projects/self-web-safiri/docs/development-plan.md) |

---

## 项目概述

self-web-safiri 是一个基于 Electron 框架的现代化浏览器，采用 Vue 3 + TypeScript 构建，提供个性化工作区、智能标签管理、沉浸式阅读体验等功能。

### 核心特性

- **个性化工作区**: 支持多工作区切换，每个工作区独立管理标签
- **智能标签管理**: 标签搜索、筛选、固定、个性化设置
- **自定义新标签页**: self-Tab支持组件化布局，可自由添加天气、待办、日历等组件
- **沉浸式阅读**: 网页内容提取、阅读样式自定义、朗读功能
- **AI辅助**: 智能搜索、摘要生成、翻译、解释等功能
- **数据管理**: 书签、历史记录、下载管理，支持导入导出

---

## 技术栈

### 核心框架

| 技术 | 版本 | 用途 |
|------|------|------|
| Electron | ^29.0.0 | 跨平台桌面应用框架 |
| Vue 3 | ^3.4.0 | 前端框架 |
| TypeScript | ^5.4.0 | 类型系统 |
| Vite | ^5.2.0 | 构建工具 |

### UI框架

| 技术 | 版本 | 用途 |
|------|------|------|
| Tailwind CSS | ^3.4.0 | CSS框架 |
| Element Plus | ^2.5.0 | UI组件库 |
| Pinia | ^2.1.0 | 状态管理 |
| Vue Router | ^4.3.0 | 路由管理 |

### 数据存储

| 技术 | 版本 | 用途 |
|------|------|------|
| better-sqlite3 | ^9.4.0 | SQLite数据库 |
| IndexedDB | 原生 | 浏览器本地存储 |
| crypto-js | ^4.2.0 | 数据加密 |

---

## 开发规范

### 代码规范

- 使用 TypeScript 进行类型检查
- 遵循 ESLint 代码规范
- 使用 Prettier 格式化代码
- 组件使用大驼峰命名
- 文件名使用短横线命名

### Git 提交规范

```
<type>(<scope>): <subject>

<body>

<footer>
```

type 类型:
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式调整
- refactor: 重构
- test: 测试
- chore: 构建/工具

### 分支管理

- main: 主分支，用于发布
- develop: 开发分支
- feature/*: 功能分支
- bugfix/*: 修复分支
- release/*: 发布分支

---

## 快速开始

### 环境要求

- Node.js >= 18.0.0
- npm >= 9.0.0
- Git

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

### 构建

```bash
npm run build
```

### 打包

```bash
npm run package
```

---

## 项目结构

```
self-web-safiri/
├── src/
│   ├── main/                    # 主进程
│   ├── preload/                # 预加载脚本
│   ├── renderer/               # 渲染进程
│   └── shared/                 # 共享代码
├── docs/                       # 文档
│   ├── architecture.md         # 系统架构设计
│   ├── modules.md             # 模块设计文档
│   ├── database.md            # 数据库设计文档
│   └── ipc-api.md             # IPC接口规范
├── resources/                  # 资源文件
├── package.json
├── tsconfig.json
├── vite.config.ts
└── electron-builder.yml
```

---

## 开发指南

### 添加新模块

1. 在 `src/main/modules/` 下创建模块目录
2. 创建 `index.ts` 和 `handlers.ts`
3. 在主进程注册IPC处理器
4. 在预加载脚本暴露API
5. 在渲染进程调用API

### 添加新组件

1. 在 `src/renderer/components/` 下创建组件文件
2. 使用 TypeScript 定义组件Props
3. 使用 Vue 3 Composition API
4. 导出组件供其他模块使用

### 数据库操作

1. 在 `src/main/database/` 下创建数据访问层
2. 使用 better-sqlite3 执行SQL
3. 使用事务处理写操作
4. 添加错误处理和日志

---

## 测试

### 单元测试

```bash
npm run test
```

### E2E测试

```bash
npm run test:e2e
```

---

## 部署

### Windows

```bash
npm run build:win
```

### macOS

```bash
npm run build:mac
```

### Linux

```bash
npm run build:linux
```

---

## 相关文档

- [需求文档](file:///f:/Development/Projects/self-web-safiri/docs/requirements.md)
- [系统架构设计](file:///f:/Development/Projects/self-web-safiri/docs/architecture.md)
- [模块设计文档](file:///f:/Development/Projects/self-web-safiri/docs/modules.md)
- [数据库设计文档](file:///f:/Development/Projects/self-web-safiri/docs/database.md)
- [IPC接口规范](file:///f:/Development/Projects/self-web-safiri/docs/ipc-api.md)
- [开发规划文档](file:///f:/Development/Projects/self-web-safiri/docs/development-plan.md)

---

## 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| V1.0 | 2025-12-26 | 初始版本 |

---

## 联系方式

如有问题或建议，请提交 Issue 或 Pull Request。
